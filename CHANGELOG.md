# 变更日志

所有对 Any2Markdown MCP Server 项目的重要更改都会记录在此文件中。

本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/) 规范。

## [未发布] - 开发中

### 新增
- 待发布功能

### 修改
- 待发布改进

### 修复
- 待发布修复

## [1.0.0] - 2024-12-28

### 🎉 首次正式发布

这是 Any2Markdown MCP Server 的首个正式版本，提供完整的文档转换功能和双协议支持。

### ✨ 核心功能

#### 📄 文档转换
- **PDF 转 Markdown**: 基于 marker-pdf 的高质量 AI 驱动转换
- **Word 转 Markdown**: 支持 .docx/.doc 格式，保持格式化
- **Excel 转 Markdown**: 支持 .xlsx/.xls 格式，表格转换
- **批量处理**: 并发处理多个文档

#### 🖼️ 图片处理
- **图片提取**: 从 PDF、Word、Excel 中提取嵌入图片
- **静态服务**: 通过 HTTP URL 提供图片访问
- **格式支持**: PNG、JPEG、GIF 等主流格式
- **冲突处理**: 智能文件命名避免并发冲突

#### 🔄 双协议支持
- **MCP 协议**: 原生 Model Context Protocol 支持
- **RESTful API**: 标准 HTTP API 接口
- **统一后端**: 两种协议共享相同转换逻辑
- **API 文档**: 完整的 OpenAPI/Swagger 文档

#### 🌐 RESTful API 特性
- **统一端点**: 单一 `/api/v1/convert` 处理所有文档类型
- **双调用方式**: 支持文件上传 (multipart/form-data) 和 base64 JSON
- **多文件处理**: 批量转换多个文档
- **自动检测**: 根据文件扩展名识别文档类型
- **丰富选项**: 图片提取、页面范围、格式保留等

### 🔧 技术特性

#### 📊 性能优化
- **智能内容控制**: `include_content` 参数控制输出大小
- **并发处理**: 可配置的并发任务数量
- **内存管理**: 优化的内存使用和垃圾回收
- **缓存机制**: AI 模型缓存和文件缓存

#### 🌍 多语言支持
- **自动检测**: 基于 langdetect 的语言识别
- **15+ 语言**: 支持中文、英文、日文等主要语言
- **降级机制**: Unicode 范围检测备用方案

#### ⚙️ 配置管理
- **环境变量**: 完整的环境变量配置支持
- **配置文件**: TOML 格式配置文件
- **默认值**: 合理的默认配置开箱即用

### 🚀 部署支持

#### 🐳 容器化
- **Dockerfile**: 优化的多阶段构建
- **Docker Compose**: 完整的容器编排配置
- **GPU 支持**: NVIDIA GPU 加速版本
- **健康检查**: 容器健康状态监控

#### 📦 部署方式
- **源码部署**: 直接 Python 运行
- **Docker 部署**: 单容器和多容器支持
- **云平台**: AWS、Azure、GCP 部署指南
- **Kubernetes**: 生产级 K8s 部署配置

### 📚 文档和示例

#### 📖 完整文档
- **技术架构**: 详细的系统设计文档
- **API 规范**: 完整的 RESTful API 设计
- **部署指南**: 多种部署方式说明
- **故障排除**: 常见问题解决方案

#### 🛠️ 示例代码
- **Python 客户端**: requests 库使用示例
- **JavaScript 客户端**: 浏览器和 Node.js 示例
- **cURL 命令**: 命令行使用示例
- **MCP 客户端**: 官方 MCP 库示例

#### 📚 教程指南
- **快速入门**: 5分钟上手指南
- **高级用法**: 深入功能探索
- **集成指南**: 第三方应用集成

### 🔧 API 端点

#### RESTful API
- `POST /api/v1/convert` - 统一文档转换
- `GET /api/v1/status` - 系统状态
- `GET /api/v1/formats` - 支持格式
- `GET /api/v1/docs` - API 文档
- `GET /api/v1/openapi.json` - OpenAPI 规范

#### MCP 工具
- `convert_pdf_to_markdown` - PDF 转换
- `convert_word_to_markdown` - Word 转换
- `convert_excel_to_markdown` - Excel 转换
- `batch_convert_documents` - 批量转换
- `analyze_pdf_structure` - PDF 结构分析
- `validate_document` - 文档验证
- `get_system_status` - 系统状态

### 🛡️ 质量保证

#### 🧪 测试覆盖
- **单元测试**: 核心功能测试
- **集成测试**: API 端点测试
- **性能测试**: 并发和负载测试
- **兼容性测试**: 多种文档格式测试

#### 📊 监控和日志
- **结构化日志**: JSON 格式日志输出
- **性能监控**: 处理时间和资源使用
- **错误追踪**: 详细的错误信息和堆栈
- **健康检查**: 服务状态监控

### 🔒 安全特性

#### 🛡️ 输入验证
- **文件类型检查**: 严格的文件格式验证
- **大小限制**: 可配置的文件大小限制
- **内容扫描**: 基础的恶意内容检测

#### 🔐 访问控制
- **CORS 配置**: 跨域请求控制
- **请求限制**: 基础的速率限制
- **错误处理**: 安全的错误信息处理

### 📈 性能指标

#### ⚡ 处理性能
- **PDF 转换**: 平均 2-5 秒/页
- **Word 转换**: 平均 1-3 秒/文档
- **Excel 转换**: 平均 0.5-2 秒/工作表
- **并发处理**: 支持 3+ 并发任务

#### 💾 资源使用
- **内存要求**: 最低 4GB，推荐 8GB
- **存储空间**: 模型缓存需要 10GB+
- **CPU 使用**: 多核优化，支持 GPU 加速

### 🌟 亮点特性

1. **统一接口**: 单一端点处理所有文档类型
2. **双协议**: MCP 和 RESTful API 同时支持
3. **文件上传**: 标准 multipart/form-data 支持
4. **图片提取**: 完整的图片处理和服务
5. **多语言**: 自动语言检测和处理
6. **高性能**: 并发处理和智能缓存
7. **易部署**: 多种部署方式支持
8. **完整文档**: 详细的文档和示例

### 🔄 兼容性

- **Python**: 3.9, 3.10, 3.11, 3.12, 3.13
- **操作系统**: Linux, macOS, Windows
- **容器**: Docker 20.10+, Kubernetes 1.20+
- **浏览器**: Chrome 90+, Firefox 88+, Safari 14+

### 📦 依赖版本

#### 核心依赖
- `fastmcp >= 0.2.0` - MCP 服务器框架
- `marker-pdf >= 0.2.0` - PDF 转换引擎
- `python-docx >= 1.1.0` - Word 文档处理
- `pandas >= 2.0.0` - Excel 数据处理
- `langdetect >= 1.0.9` - 语言检测

#### 可选依赖
- `torch >= 2.0.0` - GPU 加速支持
- `transformers >= 4.30.0` - AI 模型支持

### 🚧 已知限制

1. **PDF 复杂布局**: 复杂表格和多栏布局可能不完美
2. **Excel 公式**: 复杂公式转换有限制
3. **大文件处理**: 超大文件（>100MB）处理较慢
4. **并发限制**: 默认最多 3 个并发任务

### 🔮 未来计划

#### v1.1.0 (计划中)
- [ ] API 认证和授权
- [ ] 更多输出格式支持
- [ ] 增强的错误处理
- [ ] 性能优化

#### v1.2.0 (计划中)
- [ ] 实时转换状态
- [ ] 批量下载功能
- [ ] 更多语言支持
- [ ] 插件系统

### 🤝 贡献者

感谢所有为本项目做出贡献的开发者！

### 📄 许可证

本项目采用 [MIT 许可证](LICENSE)。

---

**完整发布说明**: [GitHub Release v1.0.0](https://github.com/WW-AI-Lab/any2markdown/releases/tag/v1.0.0) 